var z,p,me,N,oe,ve,Y,Q,V,G,P={},ge=[],De=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Z=Array.isArray;function C(t,e){for(var _ in e)t[_]=e[_];return t}function ye(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Ue(t,e,_){var n,o,i,c={};for(i in e)i=="key"?n=e[i]:i=="ref"?o=e[i]:c[i]=e[i];if(arguments.length>2&&(c.children=arguments.length>3?z.call(arguments,2):_),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)c[i]===void 0&&(c[i]=t.defaultProps[i]);return W(t,c,n,o,null)}function W(t,e,_,n,o){var i={type:t,props:e,key:_,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++me,__i:-1,__u:0};return o==null&&p.vnode!=null&&p.vnode(i),i}function D(t){return t.children}function B(t,e){this.props=t,this.context=e}function T(t,e){if(e==null)return t.__?T(t.__,t.__i+1):null;for(var _;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null)return _.__e;return typeof t.type=="function"?T(t):null}function be(t){var e,_;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((_=t.__k[e])!=null&&_.__e!=null){t.__e=t.__c.base=_.__e;break}return be(t)}}function re(t){(!t.__d&&(t.__d=!0)&&N.push(t)&&!R.__r++||oe!==p.debounceRendering)&&((oe=p.debounceRendering)||ve)(R)}function R(){var t,e,_,n,o,i,c,s;for(N.sort(Y);t=N.shift();)t.__d&&(e=N.length,n=void 0,i=(o=(_=t).__v).__e,c=[],s=[],_.__P&&((n=C({},o)).__v=o.__v+1,p.vnode&&p.vnode(n),ee(_.__P,n,o,_.__n,_.__P.namespaceURI,32&o.__u?[i]:null,c,i??T(o),!!(32&o.__u),s),n.__v=o.__v,n.__.__k[n.__i]=n,xe(c,n,s),n.__e!=i&&be(n)),N.length>e&&N.sort(Y));R.__r=0}function we(t,e,_,n,o,i,c,s,a,l,f){var r,d,u,b,k,w=n&&n.__k||ge,h=e.length;for(_.__d=a,Le(_,e,w),a=_.__d,r=0;r<h;r++)(u=_.__k[r])!=null&&(d=u.__i===-1?P:w[u.__i]||P,u.__i=r,ee(t,u,d,o,i,c,s,a,l,f),b=u.__e,u.ref&&d.ref!=u.ref&&(d.ref&&te(d.ref,null,u),f.push(u.ref,u.__c||b,u)),k==null&&b!=null&&(k=b),65536&u.__u||d.__k===u.__k?a=ke(u,a,t):typeof u.type=="function"&&u.__d!==void 0?a=u.__d:b&&(a=b.nextSibling),u.__d=void 0,u.__u&=-196609);_.__d=a,_.__e=k}function Le(t,e,_){var n,o,i,c,s,a=e.length,l=_.length,f=l,r=0;for(t.__k=[],n=0;n<a;n++)(o=e[n])!=null&&typeof o!="boolean"&&typeof o!="function"?(c=n+r,(o=t.__k[n]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?W(null,o,null,null,null):Z(o)?W(D,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?W(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,i=null,(s=o.__i=Me(o,_,c,f))!==-1&&(f--,(i=_[s])&&(i.__u|=131072)),i==null||i.__v===null?(s==-1&&r--,typeof o.type!="function"&&(o.__u|=65536)):s!==c&&(s==c-1?r--:s==c+1?r++:(s>c?r--:r++,o.__u|=65536))):o=t.__k[n]=null;if(f)for(n=0;n<l;n++)(i=_[n])!=null&&!(131072&i.__u)&&(i.__e==t.__d&&(t.__d=T(i)),Se(i,i))}function ke(t,e,_){var n,o;if(typeof t.type=="function"){for(n=t.__k,o=0;n&&o<n.length;o++)n[o]&&(n[o].__=t,e=ke(n[o],e,_));return e}t.__e!=e&&(e&&t.type&&!_.contains(e)&&(e=T(t)),_.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Me(t,e,_,n){var o=t.key,i=t.type,c=_-1,s=_+1,a=e[_];if(a===null||a&&o==a.key&&i===a.type&&!(131072&a.__u))return _;if(n>(a!=null&&!(131072&a.__u)?1:0))for(;c>=0||s<e.length;){if(c>=0){if((a=e[c])&&!(131072&a.__u)&&o==a.key&&i===a.type)return c;c--}if(s<e.length){if((a=e[s])&&!(131072&a.__u)&&o==a.key&&i===a.type)return s;s++}}return-1}function ie(t,e,_){e[0]==="-"?t.setProperty(e,_??""):t[e]=_==null?"":typeof _!="number"||De.test(e)?_:_+"px"}function I(t,e,_,n,o){var i;e:if(e==="style")if(typeof _=="string")t.style.cssText=_;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)_&&e in _||ie(t.style,e,"");if(_)for(e in _)n&&_[e]===n[e]||ie(t.style,e,_[e])}else if(e[0]==="o"&&e[1]==="n")i=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=_,_?n?_.u=n.u:(_.u=Q,t.addEventListener(e,i?G:V,i)):t.removeEventListener(e,i?G:V,i);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=_??"";break e}catch{}typeof _=="function"||(_==null||_===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&_==1?"":_))}}function le(t){return function(e){if(this.l){var _=this.l[e.type+t];if(e.t==null)e.t=Q++;else if(e.t<_.u)return;return _(p.event?p.event(e):e)}}}function ee(t,e,_,n,o,i,c,s,a,l){var f,r,d,u,b,k,w,h,v,E,$,L,H,ne,M,j,x=e.type;if(e.constructor!==void 0)return null;128&_.__u&&(a=!!(32&_.__u),i=[s=e.__e=_.__e]),(f=p.__b)&&f(e);e:if(typeof x=="function")try{if(h=e.props,v="prototype"in x&&x.prototype.render,E=(f=x.contextType)&&n[f.__c],$=f?E?E.props.value:f.__:n,_.__c?w=(r=e.__c=_.__c).__=r.__E:(v?e.__c=r=new x(h,$):(e.__c=r=new B(h,$),r.constructor=x,r.render=Ie),E&&E.sub(r),r.props=h,r.state||(r.state={}),r.context=$,r.__n=n,d=r.__d=!0,r.__h=[],r._sb=[]),v&&r.__s==null&&(r.__s=r.state),v&&x.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=C({},r.__s)),C(r.__s,x.getDerivedStateFromProps(h,r.__s))),u=r.props,b=r.state,r.__v=e,d)v&&x.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),v&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(v&&x.getDerivedStateFromProps==null&&h!==u&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(h,$),!r.__e&&(r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(h,r.__s,$)===!1||e.__v===_.__v)){for(e.__v!==_.__v&&(r.props=h,r.state=r.__s,r.__d=!1),e.__e=_.__e,e.__k=_.__k,e.__k.some(function(F){F&&(F.__=e)}),L=0;L<r._sb.length;L++)r.__h.push(r._sb[L]);r._sb=[],r.__h.length&&c.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(h,r.__s,$),v&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(u,b,k)})}if(r.context=$,r.props=h,r.__P=t,r.__e=!1,H=p.__r,ne=0,v){for(r.state=r.__s,r.__d=!1,H&&H(e),f=r.render(r.props,r.state,r.context),M=0;M<r._sb.length;M++)r.__h.push(r._sb[M]);r._sb=[]}else do r.__d=!1,H&&H(e),f=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++ne<25);r.state=r.__s,r.getChildContext!=null&&(n=C(C({},n),r.getChildContext())),v&&!d&&r.getSnapshotBeforeUpdate!=null&&(k=r.getSnapshotBeforeUpdate(u,b)),we(t,Z(j=f!=null&&f.type===D&&f.key==null?f.props.children:f)?j:[j],e,_,n,o,i,c,s,a,l),r.base=e.__e,e.__u&=-161,r.__h.length&&c.push(r),w&&(r.__E=r.__=null)}catch(F){if(e.__v=null,a||i!=null){for(e.__u|=a?160:128;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,e.__e=s}else e.__e=_.__e,e.__k=_.__k;p.__e(F,e,_)}else i==null&&e.__v===_.__v?(e.__k=_.__k,e.__e=_.__e):e.__e=Fe(_.__e,e,_,n,o,i,c,a,l);(f=p.diffed)&&f(e)}function xe(t,e,_){e.__d=void 0;for(var n=0;n<_.length;n++)te(_[n],_[++n],_[++n]);p.__c&&p.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(i){i.call(o)})}catch(i){p.__e(i,o.__v)}})}function Fe(t,e,_,n,o,i,c,s,a){var l,f,r,d,u,b,k,w=_.props,h=e.props,v=e.type;if(v==="svg"?o="http://www.w3.org/2000/svg":v==="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(l=0;l<i.length;l++)if((u=i[l])&&"setAttribute"in u==!!v&&(v?u.localName===v:u.nodeType===3)){t=u,i[l]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(o,v,h.is&&h),s&&(p.__m&&p.__m(e,i),s=!1),i=null}if(v===null)w===h||s&&t.data===h||(t.data=h);else{if(i=i&&z.call(t.childNodes),w=_.props||P,!s&&i!=null)for(w={},l=0;l<t.attributes.length;l++)w[(u=t.attributes[l]).name]=u.value;for(l in w)if(u=w[l],l!="children"){if(l=="dangerouslySetInnerHTML")r=u;else if(!(l in h)){if(l=="value"&&"defaultValue"in h||l=="checked"&&"defaultChecked"in h)continue;I(t,l,null,u,o)}}for(l in h)u=h[l],l=="children"?d=u:l=="dangerouslySetInnerHTML"?f=u:l=="value"?b=u:l=="checked"?k=u:s&&typeof u!="function"||w[l]===u||I(t,l,u,w[l],o);if(f)s||r&&(f.__html===r.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(r&&(t.innerHTML=""),we(t,Z(d)?d:[d],e,_,n,v==="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,c,i?i[0]:_.__k&&T(_,0),s,a),i!=null)for(l=i.length;l--;)ye(i[l]);s||(l="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[l]||v==="progress"&&!b||v==="option"&&b!==w[l])&&I(t,l,b,w[l],o),l="checked",k!==void 0&&k!==t[l]&&I(t,l,k,w[l],o))}return t}function te(t,e,_){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(o){p.__e(o,_)}}function Se(t,e,_){var n,o;if(p.unmount&&p.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||te(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){p.__e(i,e)}n.base=n.__P=null}if(n=t.__k)for(o=0;o<n.length;o++)n[o]&&Se(n[o],e,_||typeof t.type!="function");_||ye(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function Ie(t,e,_){return this.constructor(t,_)}function $e(t,e,_){var n,o,i,c;p.__&&p.__(t,e),o=(n=typeof _=="function")?null:e.__k,i=[],c=[],ee(e,t=(!n&&_||e).__k=Ue(D,null,[t]),o||P,P,e.namespaceURI,!n&&_?[_]:o?null:e.firstChild?z.call(e.childNodes):null,i,!n&&_?_:o?o.__e:e.firstChild,n,c),xe(i,t,c)}z=ge.slice,p={__e:function(t,e,_,n){for(var o,i,c;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(t)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,n||{}),c=o.__d),c)return o.__E=o}catch(s){t=s}throw t}},me=0,B.prototype.setState=function(t,e){var _;_=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof t=="function"&&(t=t(C({},_),this.props)),t&&C(_,t),t!=null&&this.__v&&(e&&this._sb.push(e),re(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),re(this))},B.prototype.render=D,N=[],ve=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Y=function(t,e){return t.__v.__b-e.__v.__b},R.__r=0,Q=0,V=le(!1),G=le(!0);var We=0;function m(t,e,_,n,o,i){e||(e={});var c,s,a=e;"ref"in e&&(c=e.ref,delete e.ref);var l={type:t,props:a,key:_,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--We,__i:-1,__u:0,__source:o,__self:i};if(typeof t=="function"&&(c=t.defaultProps))for(s in c)a[s]===void 0&&(a[s]=c[s]);return p.vnode&&p.vnode(l),l}var A,g,X,se,O=0,Ce=[],y=p,ce=y.__b,ae=y.__r,ue=y.diffed,fe=y.__c,pe=y.unmount,de=y.__;function _e(t,e){y.__h&&y.__h(g,t,O||e),O=0;var _=g.__H||(g.__H={__:[],__h:[]});return t>=_.__.length&&_.__.push({}),_.__[t]}function q(t){return O=1,Be(Ee,t)}function Be(t,e,_){var n=_e(A++,2);if(n.t=t,!n.__c&&(n.__=[Ee(void 0,e),function(s){var a=n.__N?n.__N[0]:n.__[0],l=n.t(a,s);a!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=g,!g.u)){var o=function(s,a,l){if(!n.__c.__H)return!0;var f=n.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!i||i.call(this,s,a,l);var r=!1;return f.forEach(function(d){if(d.__N){var u=d.__[0];d.__=d.__N,d.__N=void 0,u!==d.__[0]&&(r=!0)}}),!(!r&&n.__c.props===s)&&(!i||i.call(this,s,a,l))};g.u=!0;var i=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(s,a,l){if(this.__e){var f=i;i=void 0,o(s,a,l),i=f}c&&c.call(this,s,a,l)},g.shouldComponentUpdate=o}return n.__N||n.__}function Ne(t,e){var _=_e(A++,3);!y.__s&&Te(_.__H,e)&&(_.__=t,_.i=e,g.__H.__h.push(_))}function Ke(t){return O=5,Re(function(){return{current:t}},[])}function Re(t,e){var _=_e(A++,7);return Te(_.__H,e)&&(_.__=t(),_.__H=e,_.__h=t),_.__}function Oe(){for(var t;t=Ce.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(K),t.__H.__h.forEach(J),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,ce&&ce(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),de&&de(t,e)},y.__r=function(t){ae&&ae(t),A=0;var e=(g=t.__c).__H;e&&(X===g?(e.__h=[],g.__h=[],e.__.forEach(function(_){_.__N&&(_.__=_.__N),_.i=_.__N=void 0})):(e.__h.forEach(K),e.__h.forEach(J),e.__h=[],A=0)),X=g},y.diffed=function(t){ue&&ue(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ce.push(e)!==1&&se===y.requestAnimationFrame||((se=y.requestAnimationFrame)||qe)(Oe)),e.__H.__.forEach(function(_){_.i&&(_.__H=_.i),_.i=void 0})),X=g=null},y.__c=function(t,e){e.some(function(_){try{_.__h.forEach(K),_.__h=_.__h.filter(function(n){return!n.__||J(n)})}catch(n){e.some(function(o){o.__h&&(o.__h=[])}),e=[],y.__e(n,_.__v)}}),fe&&fe(t,e)},y.unmount=function(t){pe&&pe(t);var e,_=t.__c;_&&_.__H&&(_.__H.__.forEach(function(n){try{K(n)}catch(o){e=o}}),_.__H=void 0,e&&y.__e(e,_.__v))};var he=typeof requestAnimationFrame=="function";function qe(t){var e,_=function(){clearTimeout(n),he&&cancelAnimationFrame(e),setTimeout(t)},n=setTimeout(_,100);he&&(e=requestAnimationFrame(_))}function K(t){var e=g,_=t.__c;typeof _=="function"&&(t.__c=void 0,_()),g=e}function J(t){var e=g;t.__c=t.__(),g=e}function Te(t,e){return!t||t.length!==e.length||e.some(function(_,n){return _!==t[n]})}function Ee(t,e){return typeof e=="function"?e(t):e}async function ze(t,e,_="You are a helpful assistant"){if(!e||typeof e!="object")throw new Error("Context must be an object");if(e.web&&typeof e.web!="string")throw new Error("Web context must be a string URL");if(e.selection&&typeof e.selection!="string")throw new Error("Selection context must be a string");console.log({query:t,context:e,system:_})}const je=()=>{const[t,e]=q(""),[_,n]=q("");return Ne(()=>{chrome.storage.local.get(["openaiApiKey"],i=>{i.openaiApiKey&&e(i.openaiApiKey)})},[]),m("div",{className:"chrome-ai-settings",children:[m("h3",{children:"Settings"}),m("div",{className:"chrome-ai-setting-group",children:[m("label",{children:"OpenAI API Key:"}),m("input",{type:"password",value:t,onChange:i=>e(i.target.value),placeholder:"sk-...",autocomplete:"off"}),m("div",{className:"chrome-ai-setting-actions",children:[m("button",{onClick:()=>{n("Saving..."),chrome.storage.local.set({openaiApiKey:t},()=>{chrome.runtime.lastError?(n("Error saving key!"),console.error(chrome.runtime.lastError)):(n("Saved!"),setTimeout(()=>n(""),2e3))})},disabled:_==="Saving...",children:"Save"}),_&&m("span",{className:`chrome-ai-save-status ${_==="Error saving key!"?"error":""}`,children:_})]})]})]})},He=({hasSelection:t})=>{const e=Ke(null),[_,n]=q(t?"selection":null),[o,i]=q(!1);Ne(()=>{t&&n("selection")},[t]);const c=a=>{n(_===a?null:a)};return m("div",{className:"chrome-ai-container",children:m("div",{className:"chrome-ai-panel",children:[m("div",{className:"chrome-ai-header",children:[m("span",{children:"ChromeAi"}),m("button",{className:"chrome-ai-settings-button",onClick:()=>i(!o),title:o?"Close settings":"Open settings",children:o?"âœ•":"âš™ï¸"})]}),o?m(je,{}):m(D,{children:[m("div",{className:"chrome-ai-chat-container"}),m("div",{className:"chrome-ai-input-container",children:[m("div",{className:"chrome-ai-button-bar",children:[m("button",{className:`chrome-ai-toggle-button ${_==="web"?"active":""}`,onClick:()=>c("web"),children:"ðŸŒ"}),m("button",{className:`chrome-ai-toggle-button ${_==="selection"?"active":""} ${t?"":"disabled"}`,onClick:()=>t&&c("selection"),disabled:!t,children:"âœ‚ï¸"})]}),m("form",{onSubmit:async a=>{a.preventDefault();const l=e.current.value.trim();if(!l)return;const f={};_==="web"&&(f.web=document.body.innerText),_==="selection"&&(f.selection=window.getSelection().toString().trim()),await ze(l,f),e.current.value=""},children:m("input",{ref:e,type:"text",className:"chrome-ai-input",placeholder:"Type your message..."})})]})]})]})})},U=document.createElement("div");U.innerHTML="âœ¨";U.style.cssText=`
  position: fixed;
  right: 0;
  top: 50%;
  width: 15px;
  padding: 12px 2px;
  transform: translateY(-50%);
  background: #4285f4;
  color: white;
  cursor: pointer;
  z-index: 2147483647;
  border-top-left-radius: 8px;
  border-bottom-left-radius: 8px;
  font-size: 14px;
  box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
  border: 1px solid #3b75db;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: right 0.3s ease;
`;const S=document.createElement("iframe");S.id="chrome-ai-iframe";S.style.cssText=`
  border: none;
  position: fixed;
  right: 0;
  top: 15px;
  height: calc(100vh - 30px);
  width: 400px;
  transform: translateX(400px);
  transition: transform 0.3s ease;
  z-index: 2147483647;
  box-shadow: -5px 0 25px rgba(0, 0, 0, 0.15);
  border-top-left-radius: 8px;
  border-bottom-left-radius: 8px;
`;const Xe=async()=>{const t=await fetch(chrome.runtime.getURL("styles.css")).then(n=>n.text());S.contentDocument;const e=`
    <!DOCTYPE html>
    <html>
      <head>
        <style>
          body { 
            margin: 0; 
            padding: 0;
            height: 100vh;
            overflow: hidden;
          }
          ${t}
        </style>
      </head>
      <body>
        <div id="chrome-ai-root"></div>
      </body>
    </html>
  `;S.contentWindow.document.documentElement.innerHTML=e;const _=window.getSelection().toString().trim();$e(m(He,{hasSelection:!!_},Date.now()),S.contentDocument.getElementById("chrome-ai-root")),Pe()},Pe=()=>{const t=(e=0)=>{const _=S.contentDocument.querySelector(".chrome-ai-input");if(_){setTimeout(()=>_.focus(),50);return}e<10&&setTimeout(()=>t(e+1),50)};t()},Ae=()=>{const t=S.style.transform==="translateX(0px)",e=window.getSelection().toString().trim();t||(e&&navigator.clipboard.writeText(e),$e(m(He,{hasSelection:!!e},Date.now()),S.contentDocument.getElementById("chrome-ai-root")),Pe()),S.style.transform=t?"translateX(400px)":"translateX(0px)",U.style.right=t?"0":"400px"};U.addEventListener("click",Ae);chrome.runtime.onMessage.addListener((t,e,_)=>(t.command==="toggle-panel"&&(Ae(),_({received:!0})),!1));document.body.appendChild(U);document.body.appendChild(S);Xe();
